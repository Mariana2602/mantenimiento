<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-SgOJa3DmI69IUzQ2PVdRZhwQ+dy64/BUtbMJw1MZ8t5HZApcHrRKUc4W0kG879m7" crossorigin="anonymous">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <title>Grey Sloan Memorial Hospital | Mantenimiento</title>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <nav class="col-md-2 d-none d-md-block sidebar" id="sidebar">
                <img src="assets/alternative-logo.jpg" alt="Grey + Sloan Memorial Hospital">
                <div><i class="fas fa-home"></i><a href="../inicio/pages/dashboard.html"> Inicio</a></div>
                <div id="10"><i class="fas fa-users"></i><a href="#"> Gestión de Personal</a></div>
                <div id="4"><i class="fas fa-vial"></i><a href="#"> Laboratorio</a></div>
                <div id="3"><i class="fas fa-boxes"></i><a href="../inventario/index.html"> Inventario</a></div>
                <div id="1"><i class="fas fa-shopping-cart"></i><a href="#"> Compras</a></div>
                <div id="6"><i class="fas fa-tooth"></i><a href="#"> Consultas Odontológicas</a></div>
                <div id="7"><i class="fas fa-stethoscope"></i><a href="#"> Consultas Médicas</a></div>
                <div id="9"><i class="fas fa-file-invoice-dollar"></i><a href="#"> Administración</a></div>
                <div id="5"><i class="fas fa-procedures"></i><a href="#"> Hospitalización</a></div>
                <div id="2"><i class="fas fa-tools"></i><a href="../"> Mantenimiento</a></div>
                <div id="8"><i class="fas fa-calendar-check"></i><a href="#"> Gestión de Citas</a></div>
                <i class="fas fa-dolly"></i><a href="#"> Requisitorias</a><br>
                <i class="fas fa-external-link-square-alt"></i><a href="../index.html"> Cerrar Sesión</a>
            </nav>

            <main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-md-4">
                <div class="main-content pt-3">
                    <h1 class="mb-4">Gestión de Mantenimiento</h1>
                    <hr>
                    
                    <div class="row">
                        <div class="p-4 bg-white rounded-2 shadow">
                            <p class="d-flex gap-2">
                                <button class="btn" style="background-color: #00499b; color: white;" data-bs-toggle="collapse" data-bs-target="#ordenesServicio" aria-expanded="false">Solicitudes de servicio</button>
                                <button class="btn" style="background-color: #00499b; color: white;" data-bs-toggle="collapse" data-bs-target="#ordenesTrabajo" aria-expanded="false">Órdenes de trabajo</button>
                                <a href="reporte/" class="btn" style="background-color: #00499b; color: white;" type="button">Reportes</a>
                                <button type="button" class="btn text-end ms-auto" style="background-color: #00499b; color: white;" data-bs-toggle="modal" data-bs-target="#modalSolicitud"><i class="fas fa-plus me-2"></i>Nueva solicitud</button>
                            </p>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="collapse multi-collapse" id="ordenesServicio">
                                        <div>
                                            <div class="col-md-12">
                                                    <div class="p-4 bg-white rounded-2 shadow border">
                                                        <h2>Solicitudes de servicio</h2><br>
                                                        <table class="table table-striped text-center" id="ordenes-mantenimiento">
                                                            <thead>
                                                                <tr>
                                                                    <th>ID </th>
                                                                    <th>Tipo</th>
                                                                    <th>Descripcion</th>
                                                                    <th>Ubicacion</th>
                                                                    <th>Fecha</th>
                                                                    <th>Equipo</th>
                                                                    <th>Estado</th>
                                                                    <th>Repuesto</th>
                                                                    <th>Acciones</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody class="text-secondary"  id="data-container">
                                                            </tbody>
                                                        </table>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12">
                                    <div class="collapse multi-collapse" id="ordenesTrabajo">
                                        <div>
                                            <div class="col-md-12">
                                                <br>
                                                <div class="p-4 bg-white rounded-2 shadow border">
                                                    <h2>Órdenes de trabajo</h2><br>
                                                    <table class="table table-striped text-center">
                                                        <thead>
                                                            <tr>
                                                                <th>Nº</th>
                                                                <th>Equipo</th>
                                                                <th>Empleado</th>
                                                                <th>Fecha Ejecucion</th>
                                                                <th>Fecha Fin</th>
                                                                <th>Prioridad</th>
                                                                <th>Acciones</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody class="text-secondary"  id="datos-ordenes-trabajo">
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                            <div class="col-md-12 mt-4"> 
                                                    <div class="card card-body border-0 p-0">       
                                                        <div class="p-4 bg-white rounded-2 shadow border">
                                                        <h2>Solicitudes de servicio</h2><br>
                                                        <div class="btn-group mb-3" role="group" aria-label="Filtros Historial">
                                                            <button type="button" class="btn btn-outline-secondary btn-filtro-historial active" data-filtro="todos">Todos</button>
                                                            <button type="button" class="btn btn-outline-secondary btn-filtro-historial" data-filtro="completados">Completados</button>
                                                            <button type="button" class="btn btn-outline-secondary btn-filtro-historial" data-filtro="eliminados">Eliminados</button>
                                                        </div>
                                                        <table class="table table-striped text-center">
                                                                <thead>
                                                                    <tr>
                                                                        <th>Nº</th>
                                                                        <th>Equipo</th>
                                                                        <th>Empleado</th>
                                                                        <th>Fecha Ejecucion</th>
                                                                        <th>Fecha Fin</th>
                                                                        <th>Estado</th>
                                                                    </tr>
                                                                </thead>
                                                                <tbody class="text-secondary" id="datos-ordenes-completadas">
                                                                    </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="modalSolicitud" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-body text-start pb-5 px-5 text-secondary">
                                        <p class="my-2 fs-3 text-center">Registro de solicitud de servicio</p>
                                        <hr>
                                        <form class="row g-3 needs-validation" id="formularioMantenimiento" novalidate>
                                            <div class="col-md-12 mb-2">
                                                <label class="form-label">Descripción</label>
                                                <input id="descripcion" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Tipo de mantenimiento</label>
                                                <select id="tipoMantenimiento" class="form-select" required>
                                                    <option selected>Correctivo</option>
                                                    <option>Preventivo</option>
                                                    <option>Proactivo</option>
                                                    <option>Predictivo</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Fecha de creación</label>
                                                <input id="fechaInicio" type="date" class="form-control" required>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Estado</label>
                                                <input id="estado" type="text" class="form-control" value="Pendiente" disabled>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Ubicación</label>
                                                <input id="ubicacion" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-12 mb-2">
                                                <label class="form-label">Observaciones</label>
                                                <input id="observaciones" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Equipo</label>
                                                <select id="selectEquipo" class="form-select select-equipo-dinamico">
                                                </select>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Repuesto</label>
                                                <select id="selectRepuesto" class="form-select select-repuesto-dinamico">
                                                </select>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                        <button id="btnOrdenMantenimiento" type="button" class="btn btn-azul">Crear solicitud</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="modalEdicion" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-body text-start pb-5 px-5 text-secondary">
                                        <p class="my-4 fs-3 text-center">Actualización de orden de mantenimiento</p>
                                        <hr>
                                        <form class="row g-3 needs-validation" id="formularioEdicion" novalidate>
                                            <input type="hidden" id="mantenimientoIdEdicion" required>
                                            <div class="col-md-12">
                                                <label class="form-label">Descripción</label>
                                                <input id="descripcionEdicion" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Tipo de mantenimiento</label>
                                                <select id="tipoMantenimientoEdicion" class="form-select" required>
                                                    <option selected>Correctivo</option>
                                                    <option>Preventivo</option>
                                                    <option>Proactivo</option>
                                                    <option>Predictivo</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Fecha de creación</label>
                                                <input id="fechaInicioEdicion" type="date" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Estado</label>
                                                <input id="estadoEdicion" type="text" class="form-control" value="Pendiente" disabled>
                                            </div>
                                            <div class="col-md-6 mb-2">
                                                <label class="form-label">Ubicación</label>
                                                <input id="ubicacionEdicion" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-12 mb-2">
                                                <label class="form-label">Observaciones</label>
                                                <input id="observacionesEdicion" type="text" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Equipo</label>
                                                <select id="selectEquipoEdicion" class="form-select select-equipo-dinamico">
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Repuesto</label>
                                                <select id="selectRepuestoEdicion" class="form-select select-repuesto-dinamico">
                                                </select>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                        <button id="btnActualizarMantenimiento" type="button" class="btn btn-azul">Guardar cambios</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal fade" id="modalOrdenTrabajo" tabindex="-1" aria-hidden="true">
                            <div class="modal-dialog modal-lg">
                                <div class="modal-content">
                                    <div class="modal-body text-start pb-5 px-5 text-secondary">
                                        <p class="my-4 fs-3 text-center">Registro de orden de trabajo</p>
                                        <hr>
                                        <form class="row g-3 needs-validation" id="formularioVisualizacionOrden" required>
                                            <input type="hidden" id="mantenimientoIdOrden">
                                            <input type="hidden" id="idMantenimientoOrden">
                                            <div class="col-md-12">
                                                <label class="form-label">Descripción</label>
                                                <input id="descripcionOrden" type="text" class="form-control" disabled>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Tipo de mantenimiento</label>
                                                <select id="tipoMantenimientoOrden" class="form-select" disabled>
                                                    <option selected>Correctivo</option>
                                                    <option>Preventivo</option>
                                                    <option>Proactivo</option>
                                                    <option>Predictivo</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Fecha de creación</label>
                                                <input id="fechaInicioOrden" type="date" class="form-control" disabled>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Estado</label>
                                                <input id="estadoOrden" type="text" class="form-control" value="En proceso" disabled>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Ubicación</label>
                                                <input id="ubicacionOrden" type="text" class="form-control" disabled>
                                            </div>
                                            <div class="col-md-12">
                                                <label class="form-label">Observaciones</label>
                                                <input id="observacionesOrden" type="text" class="form-control" disabled>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Equipo</label>
                                                <select id="selectEquipoOrden" class="form-select select-equipo-dinamico" disabled>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Repuesto</label>
                                                <select id="selectRepuestoOrden" class="form-select select-repuesto-dinamico" disabled>
                                                </select>
                                            </div>
                                        </form>
                                        <hr>
                                        <p class="mb-2 fw-bold text-center">Ingrese los siguientes datos para generar la orden de trabajo.</p>
                                        <form class="row g-3 needs-validation" id="formOrdenTrabajo" novalidate>
                                            <div class="col-md-6">
                                                <label class="form-label">Personal asignado</label>
                                                <select id="selectPersonalMantenimiento" class="form-select" required>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Prioridad</label>
                                                <select id="prioridadTrabajo" class="form-select" required>
                                                    <option selected>Media</option>
                                                    <option>Alta</option>
                                                    <option>Baja</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Fecha de ejecución</label>
                                                <input id="fechaInicioTrabajo" type="date" class="form-control" required>
                                            </div>
                                            <div class="col-md-6">
                                                <label class="form-label">Fecha de finalización</label>
                                                <input id="fechaFinTrabajo" type="date" class="form-control" required>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                        <button id="btnOrdenTrabajo" type="button" class="btn btn-azul">Generar orden de trabajo</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="js/ordenMantenimiento.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>